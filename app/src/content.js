$(document).ready(function () { var a = new MutationSummary({ callback: handleChanges, queries: [{ attribute: "class" }] }) }); function handleChanges() { var k = []; var l = []; var m; var j; var b; var c = $("#ptifrmtgtframe").contents().find("[id^='MTG_INSTR']").map(function () { return this.innerText }).get(); if (c.length != 0) { for (i = 0; i < c.length; i++) { j = c[i].split(" "); m = j.length - 1; k[i] = j[0]; l[i] = j[m]; console.log(k.length); if (k[i] == "David" && l[i] == "Shattuck") { k[i] = "Dave" } } var g = ""; var h = ""; var f = ""; var e = ""; var d = ""; h = "proffirst="; for (i = 0; i < k.length; i++) { if (i == k.length - 1) { f = f + k[i] } else { f = f + k[i] + "," } } e = "&proflast="; for (i = 0; i < k.length; i++) { if (i == l.length - 1) { d = d + l[i] } else { var d = d + l[i] + "," } } g = h + f + e + d; console.log(g); var a = "http://testing.coffeeviews.net/lookup.php?" + g; a = encodeURIComponent('select * from json where url="' + a + '"'); a = "https://query.yahooapis.com/v1/public/yql?q=" + a + "&format=json"; $.ajax({ type: "POST", async: true, url: a, success: function (n) { var o = $("#ptifrmtgtframe").contents().find(".PSLEVEL1GRIDWBO").find("tr:not([id])"); o.append('<th scope="col" abbr="?Overall Rating" width="125" align="left" class="PSLEVEL1GRIDCOLUMNHDR"><a class="PSLEVEL1GRIDCOLUMNHDR" id="headercustom" href="">Overall Rating</a></th>'); o.append('<th scope="col" abbr="Easiness" width="125" align="left" class="PSLEVEL1GRIDCOLUMNHDR"><a class="PSLEVEL1GRIDCOLUMNHDR" id="headercustom" href="">Easiness</a></th>'); o.append('<th scope="col" abbr="Reviews" width="125" align="left" class="PSLEVEL1GRIDCOLUMNHDR"><a class="PSLEVEL1GRIDCOLUMNHDR" id="headercustom" href="">Reviews</a></th>'); $("#ptifrmtgtframe").contents().find("[id^='trSSR_CLSRCH_MTG']").each(function (q, r) { var p = "https://href.li/?http://www.ratemyprofessors.com/ShowRatings.jsp?tid=" + n.query.results.json.tid[q]; if (n.query.results.json.rating[q] == "Not Found") { $(r).append('<td align="center" class="PSLEVEL1GRIDODDROW"><span class="PSEDITBOX_DISPONLY" >Not Found</span></td>'); $(r).append('<td align="center" class="PSLEVEL1GRIDODDROW"><span class="PSEDITBOX_DISPONLY" >Not Found</span></td>'); $(r).append('<td align="center" class="PSLEVEL1GRIDODDROW"><span class="PSEDITBOX_DISPONLY" >N/A</span></td>') } else { $(r).append('<td align="center" class="PSLEVEL1GRIDODDROW"><span class="PSEDITBOX_DISPONLY" >' + n.query.results.json.rating[q] + "</span></td>"); $(r).append('<td align="center" class="PSLEVEL1GRIDODDROW"><span class="PSEDITBOX_DISPONLY" >' + n.query.results.json.easiness[q] + "</span></td>"); $(r).append('<td align="center" class="PSLEVEL1GRIDODDROW"><a target="_blank" href="' + p + '" class="PSEDITBOX_DISPONLY" >Click Here</a></td>') } }) } }) } };